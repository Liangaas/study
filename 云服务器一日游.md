# 云服务器一日游：

今天忽然想把自己以前写的程序放到云服务器，让它作为一个网站可以访问，然后就有了这个云服务器新手教程，也是给这次云服务器一日游的记录。

* 腾讯云 Ubuntu  *Ubuntu Server 16.04.1 LTS 64位*

* MacOS

* 打算部署的网页：后端（Node.js+mysql）

  

### 1.购买服务器

我购买的是腾讯云服务器，还有很多公司都有提供云服务（阿里云、华为云等等），大家根据自己的需要购买，如果是学生最好关注学生优惠，我买的是学生优惠10块钱一个月（听说之前还有1元一个月的活动）。

因为我是第一次使用云服务器，对于自定义配置不了解，就按照默认的配置，选择了*Ubuntu Server 16.04.1 LTS 64位*。

购买好服务器就要进行SSH密钥的配置，官方教程是腾讯云生产一对密钥对，10分钟内把私钥保存到本地，然后在云服务关机的情况下，绑定云服务器，开机，就可以使用密钥来登录云服务器。

```
ssh -i "/本地存放密钥的路径" 主机名称（如果是Ubuntu默认是ubuntu）@域名或者IP地址
```

例如

```
ssh -i "/下载/id_rsa" ubuntu@192.111.123.12
```

这样就可以进入自己的云服务器了。

### 2.SSH无密码登录

为了更安全，建议在本地生成密钥对，然后创建密钥，选择使用已有公钥，然后把本地生成的公钥复制到输入公钥那，密钥名称自己起就好。

生成密钥对

```
ssh-keygen -t rsa
```

默认生成的在/Users/用户名/.ssh/里面（可以使用command+shift+G 跳转到~/.ssh）

生成的私钥名称是id_rsa（不用管），生成的公钥名称是id_rsa.pub(将里面的内容复制到腾讯云控制台的创建密钥那)

修改私钥的权限

```
chmod 400 ~/.ssh/id_rsa #可由所有者读出
```

然后，绑定服务器，就可以使用

```
ssh ubuntu@192.111.123.12
```

进入云服务器了。

### 3.将本地的文件上传到云服务器

```
scp ~/test.txt ubuntu@192.111.123.12:/works/ 
#将本地的当前用户的宿主目录下的test.txt文件上传到云服务器上的宿主目录下的works文件夹中
```

```
scp -r ~/test ubuntu@192.111.123.12:
#将本地的当前用户的宿主目录下的test文件夹上传到云服务器的宿主目录下
```

### 4. 按照程序所需要的环境配置环境

一般centOS 用yum、Ubuntu 用apt-get来管理包

配置好环境就可以运行程序，就可以根据域名或者IP和端口号来访问了。

### 5.SSH断开后进程继续运行

有多种方法，这里介绍一种使用screen工具

1. 安装

```
sudo apt-get install screen
```

2. 创建screen窗口

```
screen -S name #name 用来标注该screen的用途
```

3. 执行你想要执行的操作
4. 退出窗口，并使的进程持续运行：先按下control+a键，再按下d键，这时候退出ssh都不会影响screen中的程序执行。
5. 恢复screen窗口：登录ssh后，执行

```
screen -r -d
```

 这样程序就可以在没有ssh连接下还能继续跑了。

## 最后

本文是写给自己的一个回顾总结，也是给如果有跟我一样都是小白的人来参考，但是因为本人学术不精，其中可以会出现许多解释不准确，如果有看到的人请帮我指出错误，必定虚心改正。



